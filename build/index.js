module.exports=function(e){function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}var t={};return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,r,t){Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:t})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s=27)}([function(e,r){e.exports=require("@reactivex/rxjs")},function(e,r){e.exports=require("fs-extra")},function(e,r){e.exports=require("path")},function(e,r,t){"use strict";function n(e,r,t,n,d,v,h){void 0===n&&(n=!1),void 0===d&&(d=void 0),void 0===v&&(v="default"),void 0===h&&(h="assets");var g=new o.Server,q=new i.PolicyEvaluator(t);return g.server(e).map(function(e){return p.manageHeaders(e,v,d)}).map(function(e){return p.manageAssets(e)}).map(function(e){return["GET","DELETE"].indexOf(e.req.method.toUpperCase())!==-1?s.Observable.of(e):u.RequestExtractor.extractBody(e)}).switch().map(function(e){return p.manageRouting(r,e,n)}).switch().map(function(e){return l.manageRequestRouteRemapping(e)}).map(function(e){var r=new a.ResponseLoader(e.reqres.res),t=r.load(),n="GET"===e.reqres.req.method.toUpperCase()?u.RequestExtractor.extract(e.reqres.req):e.reqres.req,s={route:e.route,reqres:{req:n,res:t,asset:e.reqres.asset,redirect:e.reqres.redirect}};return s}).map(function(e){return q.evaluate(e)}).switch().map(function(e){var r={pass:e.pass,asset:e.reqres.asset,redirect:e.reqres.redirect,req:e.reqres.req,res:e.reqres.res,route:e.route};return r}).map(function(e){return e.asset?(f.AssetHandler.serve(e.req,e.res,h),e):e.pass?e:(c.ErrorHandler.policyError(e.req,e.res),e)})}var s=t(0),o=t(10),i=t(6),a=t(8),u=t(7),c=t(5),p=t(9),f=t(4),l=t(9);r.createServer=n;var d=t(10);r.Server=d.Server;var v=t(4);r.AssetHandler=v.AssetHandler;var h=t(5);r.ErrorHandler=h.ErrorHandler;var g=t(7);r.RequestExtractor=g.RequestExtractor;var q=t(8);r.ResponseLoader=q.ResponseLoader;var m=t(11);r.RequestHandler=m.RequestHandler;var y=t(12);r.Router=y.Router;var O=t(6);r.PolicyEvaluator=O.PolicyEvaluator},function(e,r,t){"use strict";var n=t(1),s=t(2),o=t(19),i=function(){function e(){}return e.serve=function(e,r,t){var i=s.join(process.cwd(),t,e.url),a=o.lookup(i),u=n.statSync(i);r.sendFile(i,a,u.size)},e}();r.AssetHandler=i},function(e,r){"use strict";var t=function(){function e(){}return e.routeNotFound=function(e,r){r.error.notFound()},e.policyError=function(e,r){r.error.policyFailed()},e}();r.ErrorHandler=t},function(e,r,t){"use strict";var n=t(0),s=function(){function e(e){this.policies$=n.Observable.from(e)}return e.prototype.evaluate=function(e){return this.policies$.filter(function(r){return e.route.policies.indexOf(r.name)!==-1||0===e.route.policies.length}).map(function(r){return r.method(e.reqres)}).reduce(function(e,r){var t=r?0:1;return e+t},0).map(function(r){return 0===r?Object.assign({route:e.route,reqres:e.reqres,pass:!0}):Object.assign({route:e.route,reqres:e.reqres,pass:!1})})},e}();r.PolicyEvaluator=s},function(e,r,t){"use strict";var n=t(0),s=t(20),o=function(){function e(e){this.request=e,this.verb=this.request.method}return e.extractBody=function(e){return this.getJSON(e.req).map(function(r){return Object.assign(e,{req:Object.assign(e.req,{body:r})})})},e.extract=function(e){if("POST"===e.method.toUpperCase()){var r=e;return r.body=this.getJSON(e),r}if("GET"===e.method.toUpperCase()){var r=e;return r.params=this.getParams(e),r}},e.getJSON=function(e){return n.Observable.fromEvent(e,"data").buffer(n.Observable.fromEvent(e,"end")).map(function(e){return JSON.parse(e.toString())})},e.getParams=function(e){var r=e.url,t=s.parse(r,!0).query;return t},e}();r.RequestExtractor=o},function(e,r){"use strict";var t=function(){function e(e){var r=this;this.response=e,this.response.json=function(e){r.response.writeHead(200,{"Content-Type":"application/json"}),r.response.end(JSON.stringify(e))},this.response.ok=function(e){void 0===e&&(e="Success"),r.response.writeHead(200,{"Content-Type":"application/json"}),r.response.end(JSON.stringify({success:!0,message:e}))},this.response.unauthorized=function(e){void 0===e&&(e="You are not authorized to access this resource."),r.response.writeHead(401,{"Content-Type":"application/json"}),r.response.end(JSON.stringify({success:!1,message:e}))},this.response.error={generic:function(e,t){void 0===e&&(e=404),void 0===t&&(t="Resource not found"),r.response.writeHead(e,{"Content-Type":"application/json"}),r.response.end(JSON.stringify({success:!1,message:t}))},server:function(){r.response.writeHead(500,{"Content-Type":"application/json"}),r.response.end(JSON.stringify({success:!1,message:"Something went wrong on the server. Please try again later."}))},notFound:function(){r.response.writeHead(404,{"Content-Type":"application/json"}),r.response.end(JSON.stringify({success:!1,message:"Resource Not Found"}))},policyFailed:function(){r.response.writeHead(401,{"Content-Type":"application/json"}),r.response.end(JSON.stringify({success:!1,message:"One or more policies prevented access to this route."}))}}}return e.prototype.load=function(){return this.response},e}();r.ResponseLoader=t},function(e,r,t){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(t(14)),n(t(13)),n(t(16)),n(t(15))},function(e,r,t){"use strict";var n=t(0),s=t(17),o=t(18),i=function(){function e(e){void 0===e&&(e="http"),this.protocol=e}return e.prototype.server=function(e,r){var t=this;return void 0===r&&(r=this.protocol),n.Observable.create(function(n){var s="http"===r?t.getHttpServer(n):t.getHttpsServer(n);return s.listen(e),function(){n.complete(),s.close()}})},e.prototype.getHttpServer=function(e){var r=s.createServer(function(r,t){e.next({req:r,res:t})});return r},e.prototype.getHttpsServer=function(e){var r=o.createServer(function(r,t){e.next({req:r,res:t})});return r},e}();r.Server=i},function(e,r){"use strict";var t=function(){function e(){}return e.handle=function(e){!e.asset&&e.pass&&e.route.handler(e.req,e.res)},e}();r.RequestHandler=t},function(e,r,t){"use strict";var n=t(0),s=function(){function e(e){this.routes$=n.Observable.from(e)}return e.prototype.match=function(e){return this.routes$.filter(function(r){var t=!1,n=r.path.match(/[^:]*/i)[0];t=e.req.url.indexOf(n)!==-1;var s=e.req.url.replace(n,"").split("/").filter(function(e){return e.length>0}),o=r.path.replace(n,"").split("/").filter(function(e){return e.length>0});return t&&s.length===o.length}).filter(function(r){return r.verb.toUpperCase()===e.req.method.toUpperCase()})},e}();r.Router=s},function(e,r){"use strict";function t(e){var r=/(^\/.*\.(jpg|jpeg|gif|json|png|js|svg|ico|js.map)$)/i,t=e.req.url.match(r),n=null!==t;return Object.assign(e,{asset:n})}r.manageAssets=t},function(e,r,t){"use strict";function n(e,r,t){var n=e.res;return"undefined"!=typeof t&&("array"==typeof t.origins?n.setHeader("Access-Control-Allow-Origin",t.origins.join(", ")):n.setHeader("Access-Control-Allow-Origin",t.origins),"array"==typeof t.requestMethods?n.setHeader("Access-Control-Allow-Request-Method",t.requestMethods.join(", ")):n.setHeader("Access-Control-Allow-Request-Method",t.requestMethods),"array"==typeof t.methods?n.setHeader("Access-Control-Allow-Methods",t.methods.join(", ")):n.setHeader("Access-Control-Allow-Methods",t.methods),"array"==typeof t.headers?n.setHeader("Access-Control-Allow-Headers",t.headers.join(", ")):"string"==typeof t.headers&&"origin"===t.headers?n.setHeader("Access-Control-Allow-Headers",e.req.headers.origin):n.setHeader("Access-Control-Allow-Headers",t.headers)),"OPTIONS"===e.req.method?(e.res.writeHead(200),void e.res.end()):(n.sendFile=function(r,t,n){var o=s.createReadStream(r);e.res.setHeader("Content-Type",t),null!==n&&"undefined"!=typeof n&&e.res.setHeader("Content-Length",""+n),e.res.writeHead(200),o.pipe(e.res)},"string"==typeof r?"default"===r&&(n.render=function(e){n.writeHead(200,{"Content-Type":"text/html"}),n.end(e)}):n.render=function(e,t){r(e,t,function(e,r){e?(n.writeHead(500,{"Content-Type":"text/html"}),n.end(r)):(n.writeHead(200,{"Content-Type":"text/html"}),n.end(r))})},{req:e.req,res:n})}var s=t(1);r.manageHeaders=n},function(e,r){"use strict";function t(e){for(var r=e.route,t=e.reqres.req,n=r.path,s=t.url,o=/:([a-zA-Z_-]+[^\W])/gi,i=[],a=[];a=o.exec(n);)i.push(a[1]);var u=n.match(/^[^:]*/),c=u[0].trim();if(i.length>0&&!e.reqres.asset){var p=s.replace(c,"").split("/").filter(function(e){return e.length>0}),f=c.concat(p.join("/")),l=i.map(function(e){return e.trim()}).map(function(e,r){return e+"="+p[r]}).join("&"),d=c.trim().slice(0,c.length>1?c.length-1:c.length).concat("?").concat(l),v=Object.assign(r,{matchedPath:f}),h=Object.assign(t,{url:d,unparsedUrl:f}),g=Object.assign(e.reqres,{req:h});return Object.assign({},{route:v,reqres:g})}var q=Object.assign(t,{unparsedUrl:t.url}),m=Object.assign(e.reqres,{req:q});return Object.assign({},{route:r,reqres:m})}r.manageRequestRouteRemapping=t},function(e,r,t){"use strict";function n(e,r,t){var n=new o.Router(e).match(r);return n.defaultIfEmpty(!1).map(function(e){return e?n.map(function(e){return Object.assign({},{route:e,reqres:r})}):t?s.Observable.of(Object.assign({},{reqres:Object.assign(r,{redirect:t}),route:{path:"/redirected",verb:r.req.method,policies:[],handler:null}})):s.Observable.of(Object.assign({},{reqres:r,route:{path:"/route-not-found",verb:"GET",policies:[],handler:o.ErrorHandler.routeNotFound}}))}).switch()}var s=t(0),o=t(3);r.manageRouting=n},function(e,r){e.exports=require("http")},function(e,r){e.exports=require("https")},function(e,r){e.exports=require("mime")},function(e,r){e.exports=require("url")},,,,,,,function(e,r,t){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(t(3))}]);